import{d as e,at as a,f as t,y as l,r as o,c as s,o as n,j as r,a5 as u,au as i,av as d,l as c,u as p,a as f,i as m,h as v,T as b,Y as g,m as h,a4 as x,z as y,K as w,R as C,g as V,n as k,U as S,L as _,b as F,V as L,W as z,G as T,aw as U,ax as M,N as P,ay as B,az as D,aA as A,aB as I,aC as j,aD as G,aE as $,aF as E,aG as q,aH as N,am as R,aI as W,aJ as O,aK as H,aL as J,aM as K,aN as Y,aO as Z,aP as Q,aQ as X,aR as ee,aS as ae,aT as te,aU as le,aV as oe,aW as se,aX as ne,aY as re,aZ as ue,Z as ie,B as de,a_ as ce,w as pe,x as fe,a$ as me,b0 as ve,_ as be}from"./chunk-CbJvKZ2B.js";import{a as ge,d as he,u as xe,i as ye,f as we,t as Ce}from"./chunk-BnIIHKLx.js";import{_ as Ve}from"./chunk-DPGgRTcy.js";import"./chunk-DsM932Ci.js";const ke=ge(e({__name:"index",props:{columnWidth:{default:120},gutter:{default:16},fitWidth:{type:Boolean,default:!0}},setup(e,{expose:c}){d(e=>({v645454d4:`${e.gutter}px`}));const p=e,f=o(null),m=o(null);const v=a(()=>{m.value&&m.value.layout?.()},300);return t(async()=>{await async function(){f.value&&(await u(),m.value=new i(f.value,{itemSelector:".masonry-container > *",columnWidth:p.columnWidth,gutter:p.gutter,fitWidth:p.fitWidth,initLayout:!0}))}(),window.addEventListener("resize",v)}),l(()=>{m.value&&(m.value.destroy?.(),m.value=null),window.removeEventListener("resize",v),v.cancel()}),c({refreshLayout:async function(){await u(),m.value&&m.value.layout?.()}}),(e,a)=>(n(),s("div",{ref_key:"masonryContainer",ref:f,class:"masonry-container"},[r(e.$slots,"default",{},void 0,!0)],512))}}),[["__scopeId","data-v-c3011caa"]]),Se={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},_e={class:"fieldset-legend"},Fe={class:"flex flex-row items-center form-control"},Le={class:""},ze={class:"label flex flex-col justify-start items-start"},Te={class:"label"},Ue={class:"label-text text-left"},Me=["data-tip"],Pe=["placeholder"],Be={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},De={class:"label"},Ae={class:"label-text"},Ie=["checked"],je=e({__name:"AbilitySetting",props:{definiteTime:{required:!0},definiteTimeModifiers:{},winMusic:{type:Boolean,required:!0},winMusicModifiers:{}},emits:["update:definiteTime","update:winMusic"],setup(e){const{t:a}=c(),t=p(e,"definiteTime"),l=p(e,"winMusic");return(e,o)=>(n(),s("fieldset",Se,[f("legend",_e,m(v(a)("table.abilitySetting")),1),f("label",Fe,[f("div",Le,[f("div",ze,[f("label",Te,[f("span",Ue,m(v(a)("table.timedStop")),1),f("div",{class:"tooltip","data-tip":v(a)("tooltip.timedStop")},[...o[2]||(o[2]=[f("button",{class:"btn btn-circle h-4 hover:bg-base-300"}," ? ",-1)])],8,Me)]),b(f("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),type:"number",placeholder:v(a)("placeHolder.timedStop"),class:"w-full max-w-xs input input-bordered"},null,8,Pe),[[g,t.value]])])])]),f("div",Be,[f("div",De,[f("span",Ae,m(v(a)("table.playWinMusic")),1)]),f("input",{type:"checkbox",checked:l.value,class:"border-solid checkbox checkbox-secondary border",onChange:o[1]||(o[1]=e=>l.value=!l.value)},null,40,Ie)])]))}}),Ge={class:"flex flex-col items-center gap-6 w-full px-12"},$e=e({__name:"UploadDialog",props:h({importAllConfigData:{type:Function}},{visible:{type:Boolean,required:!0},visibleModifiers:{}}),emits:["update:visible"],setup(e){const a=e,t=x.useToast(),l=o("application/json"),s=p(e,"visible"),r=o(null),{t:u}=c(),i=o();async function d(e){if(!e)return void(r.value=null);/application\/json/.test(e?.type||"")?r.value=e:t.open({message:u("error.notJsonFile"),type:"error",position:"top-right"})}function m(){if(r.value){const e=r.value.data;a.importAllConfigData(e)}}return y(s,e=>{e&&i.value.showDialog()}),(e,a)=>(n(),w(he,{ref_key:"uploadDialogRef",ref:i,visible:s.value,"onUpdate:visible":a[0]||(a[0]=e=>s.value=e),title:v(u)("dialog.uploadFileTitle"),"submit-func":m,class:""},{content:C(()=>[f("div",Ge,[s.value?(n(),w(Ve,{key:0,"limit-type":l.value,mode:"json",onUploadFile:d},null,8,["limit-type"])):V("",!0)])]),_:1},8,["visible","title"]))}}),Ee={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},qe={class:"fieldset-legend"},Ne={class:"modal-box"},Re={class:"text-lg font-bold"},We={class:"py-4"},Oe={class:"modal-action"},He={method:"dialog",class:"flex gap-3"},Je={class:"flex flex-row items-center form-control"},Ke={class:""},Ye={class:"label flex flex-col justify-start items-start"},Ze={class:"label-text text-left"},Qe={class:"help"},Xe=e({__name:"DataSetting",props:{resetData:{type:Function},exportAllConfigData:{type:Function},importAllConfigData:{type:Function}},setup(e){const{t:a}=c(),t=o(),l=o(!1);return(o,r)=>(n(),s("fieldset",Ee,[f("legend",qe,m(v(a)("table.dataSetting")),1),f("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:t,class:"border-none modal"},[f("div",Ne,[f("h3",Re,m(v(a)("dialog.titleTip")),1),f("p",We,m(v(a)("dialog.dialogResetAllData")),1),f("div",Oe,[f("form",He,[f("button",{class:"btn",onClick:r[0]||(r[0]=e=>t.value.close())},m(v(a)("button.cancel")),1),f("button",{class:"btn",onClick:r[1]||(r[1]=(...a)=>e.resetData&&e.resetData(...a))},m(v(a)("button.confirm")),1)])])])],512),k($e,{visible:l.value,"onUpdate:visible":r[2]||(r[2]=e=>l.value=e),"import-all-config-data":e.importAllConfigData},null,8,["visible","import-all-config-data"]),f("label",Je,[f("div",Ke,[f("div",Ye,[f("span",Ze,m(v(a)("table.resetAllData")),1),f("div",Qe,[f("button",{class:"btn btn-sm btn-primary",onClick:r[3]||(r[3]=e=>t.value.showModal())},m(v(a)("button.resetAllData")),1)])])])])]))}}),ea={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},aa={class:"fieldset-legend"},ta={class:"flex flex-row items-center form-control"},la={class:""},oa={class:"label"},sa={class:"label-text"},na={class:"help"},ra={key:0,class:"text-xs text-red-400 help-text"},ua={class:"join"},ia=["data-tip"],da=["disabled"],ca={class:"loading loading-ring loading-md"},pa={class:"flex flex-row w-full max-w-xs gap-10 form-control"},fa={class:"label"},ma={class:"label-text"},va={class:"label"},ba={class:"label-text"},ga={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},ha={class:"label"},xa={class:"label-text"},ya=["checked"],wa={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},Ca={class:"label"},Va={class:"label-text"},ka=["checked"],Sa=e({__name:"LayoutSetting",props:h({resetPersonLayout:{type:Function},isRowCountChange:{}},{formErr:{required:!0},formErrModifiers:{},formData:{required:!0},formDataModifiers:{},cardSizeValue:{required:!0},cardSizeValueModifiers:{},isShowPrizeListValue:{type:Boolean,required:!0},isShowPrizeListValueModifiers:{},isShowAvatarValue:{type:Boolean,required:!1},isShowAvatarValueModifiers:{}}),emits:["update:formErr","update:formData","update:cardSizeValue","update:isShowPrizeListValue","update:isShowAvatarValue"],setup(e){const{t:a}=c(),t=p(e,"formErr"),l=p(e,"formData"),o=p(e,"cardSizeValue"),r=p(e,"isShowPrizeListValue"),u=p(e,"isShowAvatarValue");return(i,d)=>(n(),s("fieldset",ea,[f("legend",aa,m(v(a)("table.layoutSetting")),1),f("label",ta,[f("div",la,[f("div",oa,[f("span",sa,m(v(a)("table.columnNumber")),1),f("div",na,[t.value.rowCount?(n(),s("span",ra,m(t.value.rowCount),1)):V("",!0)])])])]),f("div",ua,[b(f("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>l.value.rowCount=e),type:"number",placeholder:"Type here",class:"w-full input input-bordered join-item"},null,512),[[g,l.value.rowCount]]),f("div",{class:"tooltip join-item","data-tip":v(a)("tooltip.resetLayout")},[f("button",{class:"btn btn-neutral w-30 join-item",disabled:1!==e.isRowCountChange,onClick:d[1]||(d[1]=(...a)=>e.resetPersonLayout&&e.resetPersonLayout(...a))},[f("span",null,m(v(a)("button.setLayout")),1),b(f("span",ca,null,512),[[S,2===e.isRowCountChange]])],8,da)],8,ia)]),f("label",pa,[f("div",null,[f("div",fa,[f("span",ma,m(v(a)("table.cardWidth")),1)]),b(f("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>o.value.width=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[g,o.value.width]])]),f("div",null,[f("div",va,[f("span",ba,m(v(a)("table.cardHeight")),1)]),b(f("input",{"onUpdate:modelValue":d[3]||(d[3]=e=>o.value.height=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[g,o.value.height]])])]),f("div",ga,[f("div",ha,[f("span",xa,m(v(a)("table.alwaysDisplay")),1)]),f("input",{type:"checkbox",checked:r.value,class:"border-solid checkbox checkbox-secondary border",onChange:d[4]||(d[4]=e=>r.value=!r.value)},null,40,ya)]),f("div",wa,[f("div",Ca,[f("span",Va,m(v(a)("table.avatarDisplay")),1)]),f("input",{type:"checkbox",checked:u.value,class:"border-solid checkbox checkbox-secondary border",onChange:d[5]||(d[5]=e=>u.value=!u.value)},null,40,ka)])]))}}),_a={class:"w-full h-auto"},Fa=["onClick"],La=ge(e({__name:"PatternEdit",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const a=e,t=F(()=>a);return(e,a)=>(n(),s("div",_a,[f("ul",{class:"pattern-list",style:_({gridTemplateColumns:`repeat(${t.value.rowCount},1fr)`})},[(n(!0),s(L,null,z(7*t.value.rowCount,e=>(n(),s("li",{key:e,class:"w-5 h-5",style:_({backgroundColor:t.value.patternList.includes(e)?t.value.patternColor:t.value.cardColor}),onClick:T(a=>function(e,a){if(t.value.patternList.includes(a)){const e=t.value.patternList.indexOf(a);t.value.patternList.splice(e,1)}else t.value.patternList.push(a)}(0,e),["stop"])},null,12,Fa))),128))],4)]))}}),[["__scopeId","data-v-9d5a1688"]]),za={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},Ta={class:"fieldset-legend"},Ua={class:"items-center gap-24 mb-0 form-control"},Ma={class:"label"},Pa={class:"label-text"},Ba={class:"h-auto"},Da={class:"flex w-full gap-3 m-0"},Aa=["data-tip"],Ia=e({__name:"PatternSetting",props:{rowCount:{},cardColor:{},patternColor:{},patternList:{},clearPattern:{type:Function},resetPattern:{type:Function}},setup(e){const{t:a}=c();return(t,l)=>(n(),s("fieldset",za,[f("legend",Ta,m(v(a)("table.patternSetting")),1),f("div",Ua,[f("div",null,[f("label",Ma,[f("span",Pa,m(v(a)("table.patternSetting")),1)]),f("div",Ba,[k(La,{"row-count":e.rowCount,"card-color":e.cardColor,"pattern-color":e.patternColor,"pattern-list":e.patternList},null,8,["row-count","card-color","pattern-color","pattern-list"])])]),f("div",Da,[f("button",{class:"mt-5 btn btn-info btn-sm",onClick:l[0]||(l[0]=T((...a)=>e.clearPattern&&e.clearPattern(...a),["stop"]))},[f("span",null,m(v(a)("button.clearPattern")),1)]),f("div",{class:"tooltip","data-tip":v(a)("tooltip.defaultLayout")},[f("button",{class:"mt-5 btn btn-info btn-sm",onClick:l[1]||(l[1]=(...a)=>e.resetPattern&&e.resetPattern(...a))},[f("span",null,m(v(a)("button.DefaultPattern")),1)])],8,Aa)])])]))}});function ja(...e){return U(M(e))}const Ga=e({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(e){const a=e;return(t,l)=>(n(),w(v(B),{"data-slot":"button",as:e.as,"as-child":e.asChild,class:P(v(ja)(v($a)({variant:e.variant,size:e.size}),a.class))},{default:C(()=>[r(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),$a=D("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),Ea=e({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(e,{emit:a}){const t=e,l=a,s=A(t,"class"),u=I(s,l),i=o(new Map),d=o(new Map),{contains:c}=E({sensitivity:"base"}),p=j({search:"",filtered:{count:0,items:new Map,groups:new Set}});return y(()=>p.search,()=>{!function(){if(!p.search)return void(p.filtered.count=i.value.size);p.filtered.groups=new Set;let e=0;for(const[a,t]of i.value){const l=c(t,p.search);p.filtered.items.set(a,l?1:0),l&&e++}for(const[a,t]of d.value)for(const e of t)if(p.filtered.items.get(e)>0){p.filtered.groups.add(a);break}p.filtered.count=e}()}),Ya({allItems:i,allGroups:d,filterState:p}),(e,a)=>(n(),w(v($),G({"data-slot":"command"},v(u),{class:v(ja)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t.class)}),{default:C(()=>[r(e.$slots,"default")]),_:3},16,["class"]))}}),qa=e({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const a=e,t=A(a,"class"),{filterState:l}=Ka(),o=F(()=>!!l.search&&0===l.filtered.count);return(e,l)=>o.value?(n(),w(v(B),G({key:0,"data-slot":"command-empty"},v(t),{class:v(ja)("py-6 text-center text-sm",a.class)}),{default:C(()=>[r(e.$slots,"default")]),_:3},16,["class"])):V("",!0)}}),Na=e({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(e){const a=e,o=A(a,"class"),{allGroups:s,filterState:u}=Ka(),i=q(),d=F(()=>!u.search||u.filtered.groups.has(i));return Qa({id:i}),t(()=>{s.value.has(i)||s.value.set(i,new Set)}),l(()=>{s.value.delete(i)}),(t,l)=>(n(),w(v(W),G(v(o),{id:v(i),"data-slot":"command-group",class:v(ja)("text-foreground overflow-hidden p-1",a.class),hidden:!d.value||void 0}),{default:C(()=>[e.heading?(n(),w(v(N),{key:0,"data-slot":"command-group-heading",class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:C(()=>[R(m(e.heading),1)]),_:1})):V("",!0),r(t.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),Ra={"data-slot":"command-input-wrapper",class:"flex h-9 items-center gap-2 border-b px-3"},Wa=e({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const a=e,t=A(a,"class"),l=O(t),{filterState:o}=Ka();return(e,t)=>(n(),s("div",Ra,[k(v(H),{class:"size-4 shrink-0 opacity-50"}),k(v(J),G({...v(l),...e.$attrs},{modelValue:v(o).search,"onUpdate:modelValue":t[0]||(t[0]=e=>v(o).search=e),"data-slot":"command-input","auto-focus":"",class:v(ja)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",a.class)}),null,16,["modelValue","class"])]))}}),Oa=e({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(e,{emit:a}){const s=e,u=a,i=A(s,"class"),d=I(i,u),c=q(),{filterState:p,allItems:f,allGroups:m}=Ka(),b=Za(),g=F(()=>{if(p.search){const e=p.filtered.items.get(c);return void 0===e||e>0}return!0}),h=o(),x=K(h);return t(()=>{if(!(x.value instanceof HTMLElement))return;f.value.set(c,x.value.textContent??s.value?.toString()??"");const e=b?.id;e&&(m.value.has(e)?m.value.get(e)?.add(c):m.value.set(e,new Set([c])))}),l(()=>{f.value.delete(c)}),(e,a)=>g.value?(n(),w(v(Y),G({key:0},v(d),{id:v(c),ref_key:"itemRef",ref:h,"data-slot":"command-item",class:v(ja)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s.class),onSelect:a[0]||(a[0]=()=>{v(p).search=""})}),{default:C(()=>[r(e.$slots,"default")]),_:3},16,["id","class"])):V("",!0)}}),Ha={role:"presentation"},Ja=e({__name:"CommandList",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const a=e,t=A(a,"class"),l=O(t);return(e,t)=>(n(),w(v(Z),G({"data-slot":"command-list"},v(l),{class:v(ja)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",a.class)}),{default:C(()=>[f("div",Ha,[r(e.$slots,"default")])]),_:3},16,["class"]))}}),[Ka,Ya]=Q("Command"),[Za,Qa]=Q("CommandGroup"),Xa=e({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:a}){const t=I(e,a);return(e,a)=>(n(),w(v(ae),G({"data-slot":"popover"},v(t)),{default:C(a=>[r(e.$slots,"default",X(ee(a)))]),_:3},16))}}),et=e({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{default:"center"},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:a}){const t=e,l=a,o=A(t,"class"),s=I(o,l);return(e,a)=>(n(),w(v(le),null,{default:C(()=>[k(v(te),G({"data-slot":"popover-content"},{...e.$attrs,...v(s)},{class:v(ja)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md origin-(--reka-popover-content-transform-origin) outline-hidden",t.class)}),{default:C(()=>[r(e.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),at=e({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const a=e;return(e,t)=>(n(),w(v(oe),G({"data-slot":"popover-trigger"},a),{default:C(()=>[r(e.$slots,"default")]),_:3},16))}});function tt(){const e=o(new Map),a=o(!1);return t(()=>{window.queryLocalFonts||(a.value=!0)}),{disabled:a,fonts:e,getFonts:async()=>{if(!window.queryLocalFonts)return;const a=(e=>{const a=new Map;for(const t of e){a.has(t.family)||a.set(t.family,[]);const e=a.get(t.family);if(!Array.isArray(e))continue;if(t.family===t.fullName){e.push({name:t.style,value:t.fullName});continue}const l=t.fullName.replace(t.family,"").trim(),o=t.fullName;e.push({name:l,value:o})}return a})(await window.queryLocalFonts());e.value=a}}}const lt=["onMouseenter"],ot=e({__name:"SelectFont",props:h({disabled:{type:Boolean}},{selectedFont:{type:String,required:!0},selectedFontModifiers:{}}),emits:["update:selectedFont"],setup(e){const a=e,t=p(e,"selectedFont"),{getFonts:l,disabled:r,fonts:u}=tt(),i=o(!1),d=o(""),b=se(d,20),{t:g}=c();function h(e){i.value=!1,d.value="",t.value=e}function x(e){d.value=e}function y(){d.value=""}const V=F(()=>a.disabled||r?{cursor:"not-allowed"}:{});return(a,o)=>(n(),s("div",{class:"w-full h-full flex justify-center items-center max-w-xs",style:_(V.value)},[k(v(Xa),{open:i.value,"onUpdate:open":o[2]||(o[2]=e=>i.value=e),class:"w-full"},{default:C(()=>[k(v(at),{"as-child":"",disabled:v(r)||e.disabled},{default:C(()=>[k(v(Ga),{variant:"outline",role:"combobox","aria-expanded":i.value,class:"w-full justify-between truncate hover:bg-transparent hover:text-inherit",onClick:v(l)},{default:C(()=>[f("span",{class:"w-7/8 text-left truncate",style:_({fontFamily:`${t.value}`})},m(t.value||v(g)("placeHolder.selectFont")),5),k(v(ne),{class:"opacity-50"})]),_:1},8,["aria-expanded","onClick"])]),_:1},8,["disabled"]),k(v(et),{class:"w-full p-0 bg-base-100"},{default:C(()=>[k(v(Ea),null,{default:C(()=>[k(v(Wa),{class:"h-9",placeholder:"Search framework..."}),k(v(Ja),{onScroll:y},{default:C(()=>[k(v(qa),null,{default:C(()=>[...o[3]||(o[3]=[R("No framework found.",-1)])]),_:1}),k(v(Na),null,{default:C(()=>[(n(!0),s(L,null,z(v(u),([e,a])=>(n(),w(v(Oa),{key:e,value:e,class:"w-full hover:bg-gray-200/60",onSelect:a=>h(e)},{default:C(()=>[k(v(Xa),{open:v(b)===e,class:"w-full"},{default:C(()=>[k(v(at),{class:"w-full"},{default:C(()=>[f("div",{style:_({fontFamily:`${e}`}),class:"w-full flex justify-between items-center",onMouseleave:o[0]||(o[0]=e=>x("")),onMouseenter:a=>x(e)},[R(m(e)+" ",1),k(v(re),{class:P(v(ja)("ml-auto"))},null,8,["class"])],44,lt)]),_:2},1024),k(v(et),{class:"p-2 bg-base-100",side:"right",onMouseleave:o[1]||(o[1]=e=>x("")),onMouseenter:a=>x(e)},{default:C(()=>[k(v(ue)),k(v(Ea),null,{default:C(()=>[k(v(Na),null,{default:C(()=>[(n(!0),s(L,null,z(a,a=>(n(),w(v(Oa),{key:a.value,value:a.value,class:"w-full hover:bg-gray-200/60",style:_({fontFamily:`${e}`}),onSelect:e=>h(a.value)},{default:C(()=>[R(m(a.name),1)]),_:2},1032,["value","style","onSelect"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onMouseenter"])]),_:2},1032,["open"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],4))}}),st={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},nt={class:"fieldset-legend"},rt={class:"label"},ut={class:"label"},it={class:"label-text"},dt=["placeholder"],ct={class:"w-full max-w-xs form-control"},pt={class:"label"},ft={class:"label-text"},mt={disabled:"",selected:""},vt=["value"],bt={class:"w-full max-w-xs form-control"},gt={class:"label"},ht={class:"label-text"},xt={class:"w-full max-w-xs form-control mt-3"},yt={class:"label"},wt={class:"label-text"},Ct={class:"flex flex-row w-full max-w-xs mt-5 gap-10 form-control"},Vt={class:"w-3/4"},kt={class:"label"},St={class:"label-text"},_t={class:"flex flex-col gap-4"},Ft={class:"label"},Lt={class:"label-text"},zt=["checked"],Tt=e({__name:"TextSetting",props:{languageList:{},languageListModifiers:{},topTitleValue:{default:""},topTitleValueModifiers:{},languageValue:{default:"zh-CN"},languageValueModifiers:{},textSizeValue:{},textSizeValueModifiers:{},currentFontValue:{default:"",type:String},currentFontValueModifiers:{},currentTitleFontValue:{default:"",type:String},currentTitleFontValueModifiers:{},titleFontSyncGlobalValue:{type:Boolean},titleFontSyncGlobalValueModifiers:{}},emits:["update:languageList","update:topTitleValue","update:languageValue","update:textSizeValue","update:currentFontValue","update:currentTitleFontValue","update:titleFontSyncGlobalValue"],setup(e){const{t:a}=c(),t=p(e,"languageList"),l=p(e,"topTitleValue"),o=p(e,"languageValue"),r=p(e,"textSizeValue"),u=p(e,"currentFontValue"),i=p(e,"currentTitleFontValue"),d=p(e,"titleFontSyncGlobalValue");return(e,c)=>(n(),s("fieldset",st,[f("legend",nt,m(v(a)("table.textSetting")),1),f("label",rt,[f("div",ut,[f("span",it,m(v(a)("table.title")),1)])]),b(f("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>l.value=e),type:"text",placeholder:v(a)("placeHolder.enterTitle"),class:"w-full max-w-xs input input-bordered"},null,8,dt),[[g,l.value]]),f("label",ct,[f("div",pt,[f("span",ft,m(v(a)("table.language")),1)]),b(f("select",{"onUpdate:modelValue":c[1]||(c[1]=e=>o.value=e),"data-choose-theme":"",class:"w-full max-w-xs border-solid select border"},[f("option",mt,m(v(a)("table.language")),1),(n(!0),s(L,null,z(t.value,e=>(n(),s("option",{key:e.key,value:e.key},m(e.name),9,vt))),128))],512),[[ie,o.value]])]),f("label",bt,[f("div",gt,[f("span",ht,m(v(a)("table.textSize")),1)]),b(f("input",{"onUpdate:modelValue":c[2]||(c[2]=e=>r.value=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[g,r.value]])]),f("label",xt,[f("div",yt,[f("span",wt,m(v(a)("table.globalFont")),1)]),k(ot,{"selected-font":u.value,"onUpdate:selectedFont":c[3]||(c[3]=e=>u.value=e)},null,8,["selected-font"])]),f("label",Ct,[f("div",Vt,[f("div",kt,[f("span",St,m(v(a)("table.titleFont")),1)]),k(ot,{"selected-font":i.value,"onUpdate:selectedFont":c[4]||(c[4]=e=>i.value=e),disabled:d.value},null,8,["selected-font","disabled"])]),f("div",_t,[f("div",Ft,[f("span",Lt,m(v(a)("table.syncGlobalFont")),1)]),f("input",{type:"checkbox",checked:d.value,class:"border-solid checkbox checkbox-secondary border",onChange:c[5]||(c[5]=e=>d.value=!d.value)},null,40,zt)])])]))}}),Ut=["valentine","halloween","cmyk","winter","corporate","fantasy","aqua","pastel","lemonade","garden","silk","black","coffee","wireframe","caramellatte","acid","cyberpunk","nord","bumblebee","night","dracula","synthwave","light","dark","forest","emerald","business","cupcake","autumn","abyss","dim","lofi","sunset","luxury","retro"],Mt={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},Pt={class:"fieldset-legend"},Bt={class:"w-full max-w-xs form-control"},Dt={class:"label"},At={class:"label-text"},It={disabled:"",selected:""},jt=["value"],Gt={class:"w-full max-w-xs form-control"},$t={class:"label"},Et={class:"label-text"},qt={disabled:"",selected:"",class:"w-full truncate"},Nt=["value","title"],Rt={class:"truncate w-option-xs"},Wt={class:"label"},Ot={class:"grid w-full grid-cols-2 gap-4"},Ht={class:"flex flex-col items-center max-w-xs gap-1 form-control"},Jt={class:"label"},Kt={class:"label-text"},Yt={class:"flex flex-col items-center max-w-xs gap-1 form-control"},Zt={class:"label"},Qt={class:"label-text"},Xt={class:"flex flex-col items-center max-w-xs gap-1 form-control"},el={class:"label"},al={class:"label-text"},tl={class:"flex flex-col items-center max-w-xs gap-1 form-control"},ll={class:"label"},ol={class:"label-text"},sl=e({__name:"ThemeSetting",props:h({imageList:{}},{themeValue:{},themeValueModifiers:{},backgroundImageValue:{},backgroundImageValueModifiers:{},cardColorValue:{},cardColorValueModifiers:{},luckyCardColorValue:{},luckyCardColorValueModifiers:{},textColorValue:{},textColorValueModifiers:{},patternColorValue:{},patternColorValueModifiers:{}}),emits:["update:themeValue","update:backgroundImageValue","update:cardColorValue","update:luckyCardColorValue","update:textColorValue","update:patternColorValue"],setup(e){const a=j(Ut),t=de(),{t:l}=c(),o=p(e,"themeValue"),r=p(e,"backgroundImageValue"),u=p(e,"cardColorValue"),i=p(e,"luckyCardColorValue"),d=p(e,"textColorValue"),g=p(e,"patternColorValue");return(c,p)=>(n(),s("fieldset",Mt,[f("legend",Pt,m(v(l)("table.themeSetting")),1),f("div",Bt,[f("label",Dt,[f("span",At,m(v(l)("table.theme")),1)]),b(f("select",{"onUpdate:modelValue":p[0]||(p[0]=e=>o.value=e),"data-choose-theme":"",class:"w-full max-w-xs border-solid select border"},[f("option",It,m(v(l)("table.theme")),1),(n(!0),s(L,null,z(a,(e,a)=>(n(),s("option",{key:a,value:e},m(e),9,jt))),128))],512),[[ie,o.value]])]),f("div",Gt,[f("label",$t,[f("span",Et,m(v(l)("table.backgroundImage")),1)]),b(f("select",{"onUpdate:modelValue":p[1]||(p[1]=e=>r.value=e),"data-choose-theme":"",class:"box-border w-full max-w-xs truncate border-solid select border"},[f("option",qt,m(v(l)("table.backgroundImage")),1),(n(!0),s(L,null,z([{name:"❌",url:"",id:""},...e.imageList],(e,a)=>(n(),s("option",{key:a,value:e,title:e.name,class:"box-border w-full truncate"},[f("span",Rt,m(e.name),1)],8,Nt))),128))],512),[[ie,r.value]]),f("span",Wt,[R(m(v(l)("tooltip.pleaseGoto"))+" ",1),f("a",{class:"link link-info",onClick:p[2]||(p[2]=()=>{v(t).push("image")})},m(v(l)("sidebar.imagesManagement")),1),R(" "+m(v(l)("tooltip.uploadImage")),1)])]),f("div",Ot,[f("div",Ht,[f("label",Jt,[f("span",Kt,m(v(l)("table.cardColor")),1)]),k(v(ce),{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=e=>u.value=e),"pure-color":u.value,"onUpdate:pureColor":p[4]||(p[4]=e=>u.value=e)},null,8,["modelValue","pure-color"])]),f("div",Yt,[f("label",Zt,[f("span",Qt,m(v(l)("table.winnerColor")),1)]),k(v(ce),{modelValue:i.value,"onUpdate:modelValue":p[5]||(p[5]=e=>i.value=e),"pure-color":i.value,"onUpdate:pureColor":p[6]||(p[6]=e=>i.value=e)},null,8,["modelValue","pure-color"])]),f("div",Xt,[f("label",el,[f("span",al,m(v(l)("table.textColor")),1),p[11]||(p[11]=f("div",{class:"tooltip","data-tip":"设置文本颜色会覆盖标题样式"},[f("button",{class:"btn btn-circle h-4 hover:bg-base-300"}," ? ")],-1))]),k(v(ce),{modelValue:d.value,"onUpdate:modelValue":p[7]||(p[7]=e=>d.value=e),"pure-color":d.value,"onUpdate:pureColor":p[8]||(p[8]=e=>d.value=e)},null,8,["modelValue","pure-color"])]),f("div",tl,[f("label",ll,[f("span",ol,m(v(l)("table.highlightColor")),1)]),k(v(ce),{modelValue:g.value,"onUpdate:modelValue":p[9]||(p[9]=e=>g.value=e),"pure-color":g.value,"onUpdate:pureColor":p[10]||(p[10]=e=>g.value=e)},null,8,["modelValue","pure-color"])])])]))}}),nl=pe.createInstance({name:"imgStore"}),rl=pe.createInstance({name:"audioStore"});function ul(){!async function(){await nl.clear()}(),async function(){await rl.clear()}()}function il(){const e=xe().globalConfig,a=xe().personConfig,l=xe().prizeConfig,{getGlobalConfig:s,getTopTitle:n,getTheme:r,getPatterColor:u,getPatternList:i,getCardColor:d,getLuckyColor:c,getTextColor:p,getCardSize:f,getTextSize:m,getRowCount:v,getIsShowPrizeList:b,getLanguage:g,getBackground:h,getFont:x,getTitleFont:w,getTitleFontSyncGlobal:C,getImageList:V,getIsShowAvatar:k,getDefiniteTime:S,getWinMusic:_}=fe(e),{getAlreadyPersonList:F,getNotPersonList:L}=fe(a),z=o(0),T=o(r.value.name),U=o(structuredClone(n.value)),M=o(structuredClone(d.value)),P=o(structuredClone(c.value)),B=o(structuredClone(p.value)),D=o(structuredClone(f.value)),A=o(structuredClone(m.value)),I=o(structuredClone(v.value)),j=o(structuredClone(g.value)),G=o(structuredClone(b.value)),$=o(structuredClone(k.value)),E=o(structuredClone(u.value)),q=o(h.value),N=o(structuredClone(x.value)),R=o(structuredClone(w.value)),W=o(structuredClone(C.value)),O=o(structuredClone(S.value)),H=o(structuredClone(_.value)),J=o({rowCount:I}),K=o({rowCount:""}),Y=me({rowCount:ve({error:ye.global.t("error.require")}).min(1,ye.global.t("error.minNumber1")).max(100,ye.global.t("error.maxNumber100"))}),Z={rowCount:J.value.rowCount};return y(()=>J.value.rowCount,()=>{var a;Z.rowCount=J.value.rowCount,(a=Z,Y.parseAsync(a)).then(a=>{a.rowCount&&(z.value=1,e.setRowCount(a.rowCount))}).catch(e=>{K.value.rowCount=e.issues[0].message})}),y(U,a=>{e.setTopTitle(a)}),y(T,a=>{e.setTheme({name:a}),Ce(a)},{deep:!0}),y(M,a=>{e.setCardColor(a)},{deep:!0}),y(P,a=>{e.setLuckyCardColor(a)},{deep:!0}),y(E,a=>{e.setPatterColor(a)}),y(B,a=>{e.setTextColor(a)},{deep:!0}),y(D,a=>{e.setCardSize(a)},{deep:!0}),y(G,()=>{e.setIsShowPrizeList(G.value)}),y(q,a=>{e.setBackground(a)}),y(N,a=>{e.setFont(a),document.documentElement.style.setProperty("--app-font-family",`"${a}", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`)}),y(R,a=>{e.setTitleFont(a)}),y(W,a=>{e.setTitleFontSyncGlobal(a)}),y(j,a=>{e.setLanguage(a)}),y($,()=>{e.setIsShowAvatar($.value)}),y(O,()=>{e.setDefiniteTime(O.value)}),y(H,()=>{e.setIsPlayWinMusic(H.value)}),y(A,a=>{e.setTextSize(a)}),t(()=>{}),{resetData:function(){e.reset(),a.reset(),l.resetDefault(),ul(),window.location.reload()},topTitleValue:U,languageValue:j,textSizeValue:A,currentFontValue:N,currentTitleFontValue:R,titleFontSyncGlobalValue:W,languageList:we,formErr:K,formData:J,cardSizeValue:D,isShowPrizeListValue:G,isShowAvatarValue:$,resetPersonLayout:function(){z.value=2,setTimeout(()=>{const e=F.value.length,t=L.value.length;if(e<=0&&t<=0)return;const l=F.value.concat(L.value),o=l.slice(0,e),s=l.slice(e,t+e);a.deleteAllPerson(),a.addNotPersonList(s),a.addAlreadyPersonList(o,null),z.value=0},1e3)},isRowCountChange:z,themeValue:T,backgroundImageValue:q,cardColorValue:M,luckyCardColorValue:P,textColorValue:B,patternColorValue:E,imageList:V,rowCount:v,cardColor:d,patternColor:u,patternList:i,clearPattern:function(){e.setPatternList([])},resetPattern:function(){e.resetPatternList()},exportAllConfigData:function(){const e=JSON.stringify(s.value,null,2),a=`data:application/json;charset=utf-8,${encodeURIComponent(e)}`,t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download","global-config.json"),t.click()},importAllConfigData:function(a){e.setGlobalConfig(a),window.location.reload()},definiteTimeValue:O,isWinMusicValue:H}}const dl={class:"w-4/5 flex flex-col gap-4"},cl=e({__name:"index",setup(e){const{t:a}=c(),{resetData:t,topTitleValue:l,languageValue:o,textSizeValue:r,currentFontValue:u,currentTitleFontValue:i,titleFontSyncGlobalValue:d,languageList:p,formErr:b,formData:g,cardSizeValue:h,isShowPrizeListValue:x,isShowAvatarValue:y,resetPersonLayout:w,isRowCountChange:V,themeValue:S,backgroundImageValue:_,cardColorValue:F,luckyCardColorValue:L,textColorValue:z,patternColorValue:T,imageList:U,rowCount:M,cardColor:P,patternColor:B,patternList:D,clearPattern:A,resetPattern:I,exportAllConfigData:j,importAllConfigData:G,definiteTimeValue:$,isWinMusicValue:E}=il();return(e,c)=>(n(),s("div",dl,[f("h2",null,m(v(a)("viewTitle.globalSetting")),1),k(ke,null,{default:C(()=>[k(v(Xe),{"reset-data":v(t),"export-all-config-data":v(j),"import-all-config-data":v(G)},null,8,["reset-data","export-all-config-data","import-all-config-data"]),k(v(Tt),{"top-title-value":v(l),"onUpdate:topTitleValue":c[0]||(c[0]=e=>be(l)?l.value=e:null),"language-value":v(o),"onUpdate:languageValue":c[1]||(c[1]=e=>be(o)?o.value=e:null),"text-size-value":v(r),"onUpdate:textSizeValue":c[2]||(c[2]=e=>be(r)?r.value=e:null),"current-font-value":v(u),"onUpdate:currentFontValue":c[3]||(c[3]=e=>be(u)?u.value=e:null),"current-title-font-value":v(i),"onUpdate:currentTitleFontValue":c[4]||(c[4]=e=>be(i)?i.value=e:null),"title-font-sync-global-value":v(d),"onUpdate:titleFontSyncGlobalValue":c[5]||(c[5]=e=>be(d)?d.value=e:null),"language-list":v(p),"onUpdate:languageList":c[6]||(c[6]=e=>be(p)?p.value=e:null)},null,8,["top-title-value","language-value","text-size-value","current-font-value","current-title-font-value","title-font-sync-global-value","language-list"]),k(v(Sa),{"form-err":v(b),"onUpdate:formErr":c[7]||(c[7]=e=>be(b)?b.value=e:null),"form-data":v(g),"onUpdate:formData":c[8]||(c[8]=e=>be(g)?g.value=e:null),"card-size-value":v(h),"onUpdate:cardSizeValue":c[9]||(c[9]=e=>be(h)?h.value=e:null),"is-show-prize-list-value":v(x),"onUpdate:isShowPrizeListValue":c[10]||(c[10]=e=>be(x)?x.value=e:null),"is-show-avatar-value":v(y),"onUpdate:isShowAvatarValue":c[11]||(c[11]=e=>be(y)?y.value=e:null),"reset-person-layout":v(w),"is-row-count-change":v(V)},null,8,["form-err","form-data","card-size-value","is-show-prize-list-value","is-show-avatar-value","reset-person-layout","is-row-count-change"]),k(v(sl),{"theme-value":v(S),"onUpdate:themeValue":c[12]||(c[12]=e=>be(S)?S.value=e:null),"background-image-value":v(_),"onUpdate:backgroundImageValue":c[13]||(c[13]=e=>be(_)?_.value=e:null),"card-color-value":v(F),"onUpdate:cardColorValue":c[14]||(c[14]=e=>be(F)?F.value=e:null),"lucky-card-color-value":v(L),"onUpdate:luckyCardColorValue":c[15]||(c[15]=e=>be(L)?L.value=e:null),"text-color-value":v(z),"onUpdate:textColorValue":c[16]||(c[16]=e=>be(z)?z.value=e:null),"pattern-color-value":v(T),"onUpdate:patternColorValue":c[17]||(c[17]=e=>be(T)?T.value=e:null),"image-list":v(U)},null,8,["theme-value","background-image-value","card-color-value","lucky-card-color-value","text-color-value","pattern-color-value","image-list"]),k(v(Ia),{"row-count":v(M),"card-color":v(P),"pattern-color":v(B),"pattern-list":v(D),"clear-pattern":v(A),"reset-pattern":v(I)},null,8,["row-count","card-color","pattern-color","pattern-list","clear-pattern","reset-pattern"]),k(v(je),{"definite-time":v($),"onUpdate:definiteTime":c[18]||(c[18]=e=>be($)?$.value=e:null),"win-music":v(E),"onUpdate:winMusic":c[19]||(c[19]=e=>be(E)?E.value=e:null)},null,8,["definite-time","win-music"])]),_:1})]))}});export{cl as default};
