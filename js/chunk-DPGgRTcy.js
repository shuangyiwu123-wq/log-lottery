import{g as e,b as l,c as a}from"./chunk-DsM932Ci.js";import{d as s,c as t,o as u,a as n,g as i,r as o,N as c,K as r,h as d,b1 as f,n as p,b2 as m,i as v,b3 as b}from"./chunk-CbJvKZ2B.js";const y={class:"w-full h-full flex flex-col items-center mt-6"},w=["disabled","accept"],x=["src"],h={key:2,class:"w-full h-full flex justify-center items-center flex-col gap-4"},g={key:0,class:"w-full flex items-center justify-between mt-2"},k={class:"max-w-[3/4] truncate text-sm"},j=s({__name:"index",props:{limitType:{},mode:{}},emits:["uploadFile"],setup(s,{emit:j}){const N=s,F=j,_=o(null),C=o(null);async function T(e){const s=e.target.files[0],t=s.type;if("json"===N.mode){const e=await l(s),a=JSON.parse(e);return C.value={data:a,fileName:s.name,type:t},_.value=s.name,void F("uploadFile",C.value)}const{data:u,fileName:n}=await a(s);C.value={data:u,fileName:n,type:t},_.value=n,F("uploadFile",C.value)}function q(){C.value=null,F("uploadFile",null)}return(l,a)=>(u(),t("div",y,[n("input",{id:"file-upload",disabled:null!==C.value,type:"file",class:"w-full bg-red-400/50 max-h-52 cursor-pointer absolute",style:{display:"none"},accept:s.limitType,onChange:T},null,40,w),n("label",{for:"file-upload",class:c([C.value?"cursor-not-allowed":null,"w-full h-52 cursor-pointer border-2 border-dashed flex items-center justify-center overflow-hidden"])},[C.value&&C.value.type.includes("image")?(u(),t("img",{key:0,class:"w-full object-cover stroke-0",src:d(e)(C.value.data),alt:""},null,8,x)):C.value&&C.value.type.includes("audio")?(u(),r(d(f),{key:1,class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"})):(u(),t("div",h,[p(d(m),{class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"}),a[0]||(a[0]=n("span",{class:"btn btn-neutral"},"点击上传",-1))]))],2),C.value?(u(),t("div",g,[n("p",k,v(_.value),1),n("button",{class:"btn btn-xs btn-square btn-ghost",onClick:q},[p(d(b))])])):i("",!0)]))}});export{j as _};
